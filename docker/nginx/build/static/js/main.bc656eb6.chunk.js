(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),c=a.n(i),l=(a(83),a(15)),o=a(12),s=a(17),m=a(16),u=a(18),h=(a(84),a(34)),d=a(33),f=a(30),p=a.n(f),E=a(145),b=a(147),v=a(148),g=a(149),y=a(150),F=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={formList:[]},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.props.changeTitle("View Forms"),p.a.get("/api/form/list").then(function(t){console.log(t),e.setState({formList:t.data})}).catch(function(e){console.log("error fetching data")})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(E.a,null,r.a.createElement(b.a,null,r.a.createElement(v.a,null,r.a.createElement(g.a,{align:"center"},"Form ID"),r.a.createElement(g.a,{align:"center"},"Form name"),r.a.createElement(g.a,{align:"center"},"# Submissions"),r.a.createElement(g.a,{align:"center"}," Submit Page"),r.a.createElement(g.a,{align:"center"},"Submissions Page"))),r.a.createElement(y.a,null,this.state.formList.map(function(e){return r.a.createElement(v.a,{key:e._id},r.a.createElement(g.a,{component:"th",scope:"row",align:"center"},e._id),r.a.createElement(g.a,{align:"center"},e.name),r.a.createElement(g.a,{align:"center"},e.numSubmissions),r.a.createElement(g.a,{align:"center"},r.a.createElement(h.b,{to:"/submit_form/"+e._id},"View")),r.a.createElement(g.a,{align:"center"},r.a.createElement(h.b,{to:"/form_submission_list/"+e._id},"View")))}))))}}]),t}(n.Component),j=a(162),k=a(114),O=a(152),w=a(151),S=a(156),T=a(157),C=a(165),I=a(153),_=a(163),N=a(155),W=a(164),x=a(160),L=a(154),M=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.show?this.props.error?r.a.createElement(w.a,{color:"error",variant:"body1"},this.props.errorMsg):r.a.createElement(w.a,{color:"primary",variant:"body1"},this.props.successMsg):r.a.createElement(w.a,null)}}]),t}(r.a.Component),D=["text","color","date","email","tel","number"],B=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={hasName:!1,name:"",selectedType:D[0],form:[],submited:!1,submitErr:""},a.fieldItems=a.createMenuItems(D),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.changeTitle("Form Create")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{align:"center"},r.a.createElement(j.a,{width:"80%"},r.a.createElement(k.a,null,r.a.createElement(j.a,{m:2,p:2},r.a.createElement("form",{onSubmit:function(t){return e.addField(t)}},r.a.createElement(O.a,{container:!0,spacing:3},r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(I.a,{fullWidth:!0,error:!this.state.hasName},r.a.createElement(_.a,{id:"name",name:"name",label:"Form Name",value:this.state.name,error:!this.state.hasName,required:!0,onChange:function(t){return e.handleFormName(t)}}),r.a.createElement(N.a,{error:!this.state.hasName,required:!0},"Required"))),r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(w.a,{variant:"h6",gutterBottom:!0},"Add fields")),r.a.createElement(O.a,{item:!0,xs:8},r.a.createElement(I.a,{fullWidth:!0},r.a.createElement(_.a,{required:!0,id:"field_name",name:"field_name",label:"Name"}))),r.a.createElement(O.a,{item:!0,xs:2},r.a.createElement(I.a,{fullWidth:!0},r.a.createElement(W.a,{htmlFor:"type"},"Field type"),r.a.createElement(x.a,{name:"field",id:"type",value:this.state.selectedType,onChange:function(t){return e.handleTypeChange(t.target.value)},autoWidth:!0,input:r.a.createElement(L.a,{name:"type"})},this.fieldItems))),r.a.createElement(O.a,{item:!0,xs:2},r.a.createElement(S.a,{variant:"contained",type:"submit"},"Add")))))),r.a.createElement(k.a,null,this.buildDemoForm()),r.a.createElement(T.a,{fullWidth:!0,"aria-label":"Full width outlined button group",type:"button"},r.a.createElement(S.a,{onClick:function(){return e.createForm()}},"Create"),r.a.createElement(S.a,{onClick:function(){return e.cleanForm()}},"Clean")),r.a.createElement(M,{show:this.state.submited,error:""!==this.state.submitErr,errorMsg:this.state.submitErr,successMsg:"Form submited successfuly"})))}},{key:"createMenuItems",value:function(e){return e.map(function(e){return r.a.createElement(C.a,{value:e,key:e},e)})}},{key:"addField",value:function(e){e.preventDefault();var t=new FormData(e.target),a=this.state.form;a.push({name:t.get("field_name"),type:this.state.selectedType}),this.setState({form:a})}},{key:"buildDemoForm",value:function(){return r.a.createElement("div",null,r.a.createElement(w.a,{variant:"h6",gutterBottom:!0},"Form ",this.state.name),r.a.createElement(j.a,{width:"60%"},this.state.form.map(function(e){return r.a.createElement(j.a,{key:"".concat(e.name),width:"100%",p:2},r.a.createElement(W.a,null,e.name,": "),r.a.createElement(L.a,{fullWidth:!0,type:e.type,name:e.name}),r.a.createElement("br",null))})))}},{key:"handleTypeChange",value:function(e){this.setState({selectedType:e})}},{key:"handleFormName",value:function(e){this.setState({hasName:""!==e.target.value,name:e.target.value})}},{key:"createForm",value:function(){var e=this;if(this.state.hasName){var t={name:this.state.name,fields:this.state.form};p.a.post("/api/form",t).then(function(t){e.setState({submited:!0,submitErr:""})}).catch(function(t){var a;a=t.response?"Failed to submit: "+t.response.data:"Failed to submit: unknown error",e.setState({submited:!0,submitErr:a})})}}},{key:"cleanForm",value:function(){this.setState({name:"",hasName:!1,form:[]})}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={formFields:[],submited:!1,submitErr:""},a.formId=a.props.formId,a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;p.a.get("/api/form?id=".concat(this.formId)).then(function(t){console.log(t),e.setState({formFields:t.data.formFields,submited:!1,submitErr:""}),e.props.changeTitle("Form ".concat(t.data.name," Submission"))}).catch(function(e){console.log(e),console.log("error fetching data")})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{align:"center"},r.a.createElement(j.a,{width:"80%"},r.a.createElement(k.a,null,r.a.createElement(j.a,{p:2,m:2},r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},this.buildFormFields(),r.a.createElement(S.a,{type:"submit"},"Submit"),r.a.createElement(M,{show:this.state.submited,error:""!==this.state.submitErr,errorMsg:this.state.submitErr,successMsg:"Form submited successfuly"}))))))}},{key:"buildInputLabel",value:function(e){return"date"===e.type?r.a.createElement(W.a,{shrink:!0},e.name):r.a.createElement(W.a,null,e.name)}},{key:"buildFormFields",value:function(){var e=this;return r.a.createElement(j.a,{width:"60%",maxWidth:"600px"},this.state.formFields.map(function(t){return r.a.createElement(I.a,{key:"".concat(t.name),fullWidth:!0},e.buildInputLabel(t),r.a.createElement(L.a,{type:t.type,name:t.name}))}))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=new FormData(e.target),n={};a.forEach(function(e,t){n[t]=e}),p.a.post("/api/form/submit",{id:this.formId,submission:n}).then(function(e){return t.setState({submited:!0,submitErr:""})}).catch(function(e){var a;a=e.response?"Failed to submit: "+e.response.data:"Failed to submit: unknown error",t.setState({submited:!0,submitErr:a})})}}]),t}(n.Component),q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={inputList:[],submissionList:[]},a.formId=a.props.formId,a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;p.a.get("/api/form?id=".concat(this.formId)).then(function(t){console.log(t),e.setState({inputList:t.data.formFields,submissionList:t.data.submissions}),e.props.changeTitle("Form ".concat(t.data.name," submissions"))}).catch(function(e){console.log("error fetching data")})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(E.a,null,r.a.createElement(b.a,null,r.a.createElement(v.a,null,this.state.inputList.map(function(e){return r.a.createElement(g.a,{key:"".concat(e.name,"_head"),align:"center"},e.name)}))),r.a.createElement(y.a,null,this.state.submissionList.map(function(t,a){return r.a.createElement(v.a,null,e.state.inputList.map(function(e){return r.a.createElement(g.a,{key:"".concat(e.name,"_").concat(a),align:"center"},t[e.name])}))}))))}}]),t}(n.Component),R=a(4),V=a(158),G=a(159),J=r.a.forwardRef(function(e,t){return r.a.createElement(h.b,Object.assign({innerRef:t},e))}),P=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).classes=e.classes,a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:this.classes.root},r.a.createElement(V.a,{position:"static",color:"default"},r.a.createElement(G.a,null,r.a.createElement(w.a,{variant:"h6",className:this.classes.title},this.props.title),r.a.createElement(S.a,{color:"default",component:J,to:"/"},"View Forms"),r.a.createElement(S.a,{color:"default",component:J,to:"/create_form"},"Create Form"))))}}]),t}(r.a.Component),$=Object(R.a)({root:{flexGrow:1,marginBottom:"5px"},menuButton:{marginRight:2},title:{flexGrow:1}})(P),z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={title:""},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(h.a,null,r.a.createElement($,{title:this.state.title}),r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/",exact:!0,render:function(){return r.a.createElement(F,{changeTitle:function(t){return e.changeTitle(t)}})}}),r.a.createElement(d.a,{path:"/create_form",render:function(){return r.a.createElement(B,{changeTitle:function(t){return e.changeTitle(t)}})}}),r.a.createElement(d.a,{path:"/submit_form/:id",render:function(t){var a=t.match;return r.a.createElement(A,{changeTitle:function(t){return e.changeTitle(t)},formId:a.params.id})}}),r.a.createElement(d.a,{path:"/form_submission_list/:id",render:function(t){var a=t.match;return r.a.createElement(q,{changeTitle:function(t){return e.changeTitle(t)},formId:a.params.id})}}))))}},{key:"changeTitle",value:function(e){this.setState({title:e})}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},78:function(e,t,a){e.exports=a(113)},83:function(e,t,a){},84:function(e,t,a){}},[[78,1,2]]]);
//# sourceMappingURL=main.bc656eb6.chunk.js.map